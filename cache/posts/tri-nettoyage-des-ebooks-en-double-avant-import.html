<p class="alert alert-info"><em>One-liner</em> pour gagner du temps avant une mise à jour / import massif d'ebooks</p>
<ul class="simple">
<li>Bien utile quand la bibliothèque <em>Calibre</em> est bien propre, et que le <em>.zip</em> <em>&quot;Domaine public / tout zola+hugo+balzac+inédits&quot;</em> donne envie, sauf l'étape du tri des doublons...</li>
</ul>
<div class="section" id="d-abord">
<h2>D'abord</h2>
<ul class="simple">
<li>Récupérer <em>fdupes</em> qui va faire le job à notre place!</li>
</ul>
<pre class="code bash literal-block">
sudo pacman -Suy fdupes
</pre>
<!-- TEASER_END -->
</div>
<div class="section" id="ensuite">
<h2>Ensuite</h2>
<ul class="simple">
<li>Décompresser / rassembler les ebooks nouveaux dans un dossier identifiable, ici <strong>temp</strong> situé dans le même dossier que la bibli calibre <em>propre</em>, nommée <strong>ebooks</strong>.</li>
<li>Exécuter la commande suivante :</li>
</ul>
<pre class="code bash literal-block">
fdupes -r ebooks temp | grep <span class="s2">&quot;temp/&quot;</span>
</pre>
<ul class="simple">
<li>Elle n'affiche que les traces de fichiers dupliqués situés dans le dossier <em>temp</em>, mais présents égalements dans <em>ebooks</em></li>
<li>Vérification via <em>calibre</em> sur un nom ou deux, hein, manière, viens pas pleurer si t'as les doigts de poulet, sinon...</li>
<li>Et puis la moulinette qui va supprimer les doublons à la volée.</li>
</ul>
<pre class="code bash literal-block">
fdupes -r ebooks temp | grep <span class="s2">&quot;temp/&quot;</span> |awk <span class="s1">'{ print &quot;rm \&quot;&quot; $0 &quot;\&quot;&quot; }'</span> | sh
</pre>
<ul class="simple">
<li>Maintenant que <em>temp</em> est nettoyé, faut importer !</li>
</ul>
</div>
